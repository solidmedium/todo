{"version":3,"sources":["index.js"],"names":["modalComponent","title","value","renderHTML","form","html","trim","renderTable","data","dataIsolated","filter","p","publish","console","log","rows","map","items","editParams","id","deleteParams","btns","priority","priorityText","complete","completeText","name","addBtn","table","active","action","closeModal","modal","document","getElementById","remove","renderModal","params","Object","create","val","newModal","mount","innerHTML","input","focus","addEventListener","saveValue","e","count","push","loadApp","tableHTML"],"mappings":"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","file":"index.js","sourcesContent":["'use strict';\n\nlet modalComponent = {\n  title: 'Add New Todo',\n  value: '',\n  delete: false,\n  renderHTML() {\n\n    let form = '';\n    if (this.delete) {\n      form = `\n        <div class=\"input-container\">\n          <h2>Your are about to delete this item</h2>\n          <input type=\"text\" disabled id=\"input-add-todo\" class=\"form-control\" id=\"\" value=\"${this.value}\">\n          <button type=\"button\" id=\"btn-save-todo\" class=\"btn btn-red\">Confirm Delete</button>\n        </div>\n      `;\n    } else {\n      form = `\n        <div class=\"input-container\">\n          <input type=\"text\" placeholder=\"${this.title}\" id=\"input-add-todo\" class=\"form-control\" id=\"\" value=\"${this.value}\">\n          <button type=\"button\" id=\"btn-save-todo\" class=\"btn btn-blue\">GO</button>\n        </div>\n      `;\n    }\n\n    const html = `\n      <div class=\"modal\" id=\"modal\">\n        <div class=\"modal-header\">\n          <h4 class=\"modal-title\"></h4>\n          <button type=\"button\" class=\"close btn btn-red\" id=\"btn-close-modal\">\n            <span aria-hidden=\"true\">X</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n           ${form}\n        </div>\n      </div>\n    `;\n\n    return html.trim();\n  }\n};\n\nfunction renderTable(data) {\n\n  // Remove unpublished/deleted items from the array\n  const dataIsolated = data.filter(p => p.publish);\n\n  console.log(dataIsolated);\n\n  let rows = [];\n  dataIsolated.map(items => {\n\n    const editParams = [items.id, 1];\n    const deleteParams = [items.id, 2];\n    \n    const btns = `\n      <button type=\"button\" data-type=\"edit\" onclick=\"renderModal(${editParams});\" class=\"btn btn-blue btn-edit\">Edit</button>\n      <button type=\"button\" data-type=\"delete\" onclick=\"renderModal(${deleteParams});\" class=\"btn btn-red btn-delete\">Delete</button>\n    `;\n\n    const priority = (items.priority) ? ' checked' : '';\n    const priorityText = (items.priority) ? ' Yes' : ' No';\n    const complete = (items.complete) ? ' checked' : '';\n    const completeText = (items.complete) ? ' Yes' : ' No';\n\n    rows += `\n      <tr>\n        <td>${items.name}</td>\n        <td>\n          <label>\n            <input type=\"checkbox\" ${priority} class=\"custom-control-input\">${priorityText}\n          </label>\n        </td>\n        <td>\n          <label>\n            <input type=\"checkbox\" ${complete} class=\"custom-control-input\">${completeText}\n          </label>\n        </td>\n        <td>${btns}</td>\n      </tr>\n    `;\n  });\n\n  const addBtn = `\n    <div class=\"text-center\">\n      <button type=\"button\" id=\"btn-launch-modal\" class=\"btn btn-green\">Add New Todo</button>\n    </div>\n  `;\n\n  const table = `\n    ${addBtn}\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th>Name</th>\n          <th>Priority</th>\n          <th>Complete</th>\n          <th>Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        ${rows}\n      </tbody>\n    </table>\n  `;\n\n  return table;\n}\n\nlet data = [\n  {\n    id: 1,\n    name: 'Take out the trash',\n    priority: false,\n    complete: false,\n    publish: true\n  }, {\n    id: 2,\n    name: 'Bring in the trash',\n    priority: false,\n    complete: false,\n    publish: true\n  },  {\n    id: 3,\n    name: 'Walk the dog',\n    priority: false,\n    complete: false,\n    publish: false\n  } \n];\n\nlet active = {\n  id: '',\n  action: ''\n};\n\n/* ########################\n######### METHODS #########\n######################### */\n\nconst closeModal = () => {\n  // Remove modal from DOM\n  const modal = document.getElementById('modal');\n  modal.remove();\n};\n\nconst renderModal = (...params) => {\n\n  console.log(params[0], params[1]);\n\n  // params[1] === 1 Edit\n  // params[1] === 2 Delete\n \n  // Generate new modal object\n  const modal = Object.create(modalComponent);\n  modal.title = 'Add New Todo';\n\n  // check params for edit or delete\n  if (params[1]) {\n\n    active.id = params[0];\n    active.action = params[1];\n\n    const val = data.filter(p => p.id === params[0]);\n    modal.value = val[0].name;\n\n    // set to delete to true to switch modal UI\n    if (params[1] === 2) modal.delete = true;\n  }\n\n  const newModal = modal.renderHTML();\n  const mount = document.getElementById('modal-mount-point');\n  // Add modal to the DOM\n  mount.innerHTML = newModal;\n\n  // Automatically add focus to the input with the modal\n  if ((!params[1]) || (params[1] === 1)) {\n    \n    const input = document.getElementById('input-add-todo');\n    input.focus();\n\n  }\n  \n  // add lister to save btn\n  document.getElementById(\"btn-save-todo\").addEventListener(\"click\", saveValue);\n\n  // Add listener to close modal button\n  document.getElementById(\"btn-close-modal\").addEventListener(\"click\", closeModal);\n};\n\nconst saveValue = (e) => {\n\n  const value = document.getElementById(\"input-add-todo\").value;\n\n  // Delete function\n  if (active.action === 2) {\n    // isolate item to delete\n    const dataIsolated = data.filter(p => p.id === active.id);\n    // set item to unpublish (soft delete)\n    dataIsolated[0].publish = false;\n\n  // Edit function\n  } else if (active.action === 1) {\n    // Isolate item to edit\n    const dataIsolated = data.filter(p => p.id === active.id);\n    // Set new value\n    dataIsolated[0].name = value;\n  \n  // Create new item function\n  } else {\n    \n    let count = 0;\n\n    data.map(() => { count += 1; });\n\n    data.push({\n      id: count + 1,\n      name: value,\n      priority: false,\n      complete: false,\n      publish: true\n    });\n  }\n\n  active.id = '';\n  active.action = '';\n\n  console.log(data);\n\n  closeModal();\n\n  loadApp();\n};\n\nconst loadApp = () => {\n  \n  const tableHTML = renderTable(data);\n  const mount = document.getElementById('app-mount-point');\n\n  mount.innerHTML = tableHTML;\n\n  // Listen for add todo click\n  document.getElementById(\"btn-launch-modal\").addEventListener(\"click\", renderModal);\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", loadApp);\n"]}