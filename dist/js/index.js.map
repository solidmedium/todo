{"version":3,"sources":["index.js"],"names":["modalComponent","title","value","renderHTML","form","html","trim","renderTable","data","active","dataIsolated","filter","p","publish","console","log","rows","countTotal","countComplete","map","items","complete","editParams","id","deleteParams","btns","priority","priorityText","priorityParams","completeText","completeParams","name","addBtn","sortPriorityParams","sortNameParams","sortPriority","sortName","sortUI","table","action","closeModal","modal","document","getElementById","remove","renderModal","params","Object","create","val","newModal","mount","innerHTML","input","focus","addEventListener","saveValue","e","count","push","loadApp","toggleHandler","sortHandler","tableHTML"],"mappings":"AAAA;;AAEA,IAAIA,cAAc,GAAG;AACnBC,EAAAA,KAAK,EAAE,cADY;AAEnBC,EAAAA,KAAK,EAAE,EAFY;AAGnB,YAAQ,KAHW;AAInBC,EAAAA,UAJmB,wBAIN;AAEX,QAAIC,IAAI,GAAG,EAAX;;AACA,QAAI,cAAJ,EAAiB;AACfA,MAAAA,IAAI,oNAGoF,KAAKF,KAHzF,sIAAJ;AAOD,KARD,MAQO;AACLE,MAAAA,IAAI,qGAEkC,KAAKH,KAFvC,6EAEuG,KAAKC,KAF5G,4HAAJ;AAMD;;AAED,QAAMG,IAAI,sWASDD,IATC,yCAAV;AAcA,WAAOC,IAAI,CAACC,IAAL,EAAP;AACD;AAvCkB,CAArB;;AA0CA,SAASC,WAAT,CAAqBC,IAArB,EAA2BC,MAA3B,EAAmC;AAEjC;AACA,MAAMC,YAAY,GAAGF,IAAI,CAACG,MAAL,CAAY,UAAAC,CAAC;AAAA,WAAIA,CAAC,CAACC,OAAN;AAAA,GAAb,CAArB;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAYL,YAAZ;AAEA,MAAIM,IAAI,GAAG,EAAX;AACA,MAAIC,UAAU,GAAG,CAAjB;AACA,MAAIC,aAAa,GAAG,CAApB;AACAR,EAAAA,YAAY,CAACS,GAAb,CAAiB,UAAAC,KAAK,EAAI;AAExBH,IAAAA,UAAU,IAAI,CAAd,CAFwB,CAEP;;AACjB,QAAIG,KAAK,CAACC,QAAV,EAAoBH,aAAa,IAAI,CAAjB,CAHI,CAGgB;;AAExC,QAAMI,UAAU,GAAG,CAACF,KAAK,CAACG,EAAP,EAAW,CAAX,CAAnB,CALwB,CAKU;;AAClC,QAAMC,YAAY,GAAG,CAACJ,KAAK,CAACG,EAAP,EAAW,CAAX,CAArB,CANwB,CAMY;AAEpC;;AACA,QAAME,IAAI,sFACsDH,UADtD,2IAEwDE,YAFxD,gEAAV,CATwB,CAcxB;;AACA,QAAME,QAAQ,GAAIN,KAAK,CAACM,QAAP,GAAmB,UAAnB,GAAgC,EAAjD;AACA,QAAMC,YAAY,GAAIP,KAAK,CAACM,QAAP,GAAmB,MAAnB,GAA4B,KAAjD;AACA,QAAME,cAAc,GAAG,CAACR,KAAK,CAACG,EAAP,EAAW,CAAX,CAAvB,CAjBwB,CAkBxB;;AACA,QAAMF,QAAQ,GAAID,KAAK,CAACC,QAAP,GAAmB,UAAnB,GAAgC,EAAjD;AACA,QAAMQ,YAAY,GAAIT,KAAK,CAACC,QAAP,GAAmB,MAAnB,GAA4B,KAAjD;AACA,QAAMS,cAAc,GAAG,CAACV,KAAK,CAACG,EAAP,EAAW,CAAX,CAAvB,CArBwB,CAuBxB;;AACAP,IAAAA,IAAI,wCAEMI,KAAK,CAACW,IAFZ,yFAK4BL,QAL5B,uCAKgEE,cALhE,iDAKkHD,YALlH,uHAU4BN,QAV5B,uCAUgES,cAVhE,iDAUkHD,YAVlH,8DAaMJ,IAbN,6BAAJ;AAgBD,GAxCD,EAViC,CAoDjC;;AACA,MAAMO,MAAM,8GAAZ;AAIA,MAAMC,kBAAkB,GAAG,CAAC,CAAD,CAA3B;AACA,MAAMC,cAAc,GAAG,CAAC,CAAD,CAAvB;AAEA,MAAMC,YAAY,GAAI1B,MAAM,CAAC0B,YAAR,GAAwB,UAAxB,GAAqC,EAA1D;AACA,MAAMC,QAAQ,GAAI3B,MAAM,CAAC2B,QAAR,GAAoB,UAApB,GAAiC,EAAlD,CA7DiC,CA+DjC;;AACA,MAAMC,MAAM,0DAEgBD,QAFhB,qCAEkDF,cAFlD,yHAKgBC,YALhB,qCAKsDF,kBALtD,4EAAZ,CAhEiC,CAyEjC;;AACA,MAAMK,KAAK,8CACkBD,MADlB,cAC4BL,MAD5B,iPAYHhB,IAZG,uGAe2CE,aAf3C,iBAe+DD,UAf/D,+BAAX;AAkBA,SAAOqB,KAAP;AACD;;AAED,IAAI9B,IAAI,GAAG,CACT;AACEe,EAAAA,EAAE,EAAE,CADN;AAEEQ,EAAAA,IAAI,EAAE,oBAFR;AAGEL,EAAAA,QAAQ,EAAE,KAHZ;AAIEL,EAAAA,QAAQ,EAAE,KAJZ;AAKER,EAAAA,OAAO,EAAE;AALX,CADS,EAON;AACDU,EAAAA,EAAE,EAAE,CADH;AAEDQ,EAAAA,IAAI,EAAE,oBAFL;AAGDL,EAAAA,QAAQ,EAAE,KAHT;AAIDL,EAAAA,QAAQ,EAAE,KAJT;AAKDR,EAAAA,OAAO,EAAE;AALR,CAPM,EAaL;AACFU,EAAAA,EAAE,EAAE,CADF;AAEFQ,EAAAA,IAAI,EAAE,cAFJ;AAGFL,EAAAA,QAAQ,EAAE,IAHR;AAIFL,EAAAA,QAAQ,EAAE,KAJR;AAKFR,EAAAA,OAAO,EAAE;AALP,CAbK,CAAX;AAsBA,IAAIJ,MAAM,GAAG;AACXc,EAAAA,EAAE,EAAE,EADO;AAEXgB,EAAAA,MAAM,EAAE,EAFG;AAGXJ,EAAAA,YAAY,EAAE,KAHH;AAIXC,EAAAA,QAAQ,EAAE;AAJC,CAAb;AAOA;AACA;AACA;;AAEA,IAAMI,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB;AACA,MAAMC,KAAK,GAAGC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAd;AACAF,EAAAA,KAAK,CAACG,MAAN;AAEAnC,EAAAA,MAAM,CAACc,EAAP,GAAY,EAAZ;AACAd,EAAAA,MAAM,CAAC8B,MAAP,GAAgB,EAAhB;AACD,CAPD;;AASA,IAAMM,WAAW,GAAG,SAAdA,WAAc,GAAe;AAAA,oCAAXC,MAAW;AAAXA,IAAAA,MAAW;AAAA;;AAEjChC,EAAAA,OAAO,CAACC,GAAR,CAAY+B,MAAM,CAAC,CAAD,CAAlB,EAAuBA,MAAM,CAAC,CAAD,CAA7B,EAFiC,CAIjC;AACA;AAEA;;AACA,MAAML,KAAK,GAAGM,MAAM,CAACC,MAAP,CAAchD,cAAd,CAAd;AACAyC,EAAAA,KAAK,CAACxC,KAAN,GAAc,cAAd,CATiC,CAWjC;;AACA,MAAI6C,MAAM,CAAC,CAAD,CAAV,EAAe;AAEbrC,IAAAA,MAAM,CAACc,EAAP,GAAYuB,MAAM,CAAC,CAAD,CAAlB;AACArC,IAAAA,MAAM,CAAC8B,MAAP,GAAgBO,MAAM,CAAC,CAAD,CAAtB;AAEA,QAAMG,GAAG,GAAGzC,IAAI,CAACG,MAAL,CAAY,UAAAC,CAAC;AAAA,aAAIA,CAAC,CAACW,EAAF,KAASuB,MAAM,CAAC,CAAD,CAAnB;AAAA,KAAb,CAAZ;AACAL,IAAAA,KAAK,CAACvC,KAAN,GAAc+C,GAAG,CAAC,CAAD,CAAH,CAAOlB,IAArB,CANa,CAQb;;AACA,QAAIe,MAAM,CAAC,CAAD,CAAN,KAAc,CAAlB,EAAqBL,KAAK,UAAL,GAAe,IAAf;AACtB;;AAED,MAAMS,QAAQ,GAAGT,KAAK,CAACtC,UAAN,EAAjB;AACA,MAAMgD,KAAK,GAAGT,QAAQ,CAACC,cAAT,CAAwB,mBAAxB,CAAd,CAzBiC,CA0BjC;;AACAQ,EAAAA,KAAK,CAACC,SAAN,GAAkBF,QAAlB;;AAEA,MAAK,CAACJ,MAAM,CAAC,CAAD,CAAR,IAAiBA,MAAM,CAAC,CAAD,CAAN,KAAc,CAAnC,EAAuC;AACrC;AACA,QAAMO,KAAK,GAAGX,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,CAAd;AACAU,IAAAA,KAAK,CAACC,KAAN;AAED,GAlCgC,CAoCjC;;;AACAZ,EAAAA,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCY,gBAAzC,CAA0D,OAA1D,EAAmEC,SAAnE,EArCiC,CAuCjC;;AACAd,EAAAA,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,EAA2CY,gBAA3C,CAA4D,OAA5D,EAAqEf,UAArE;AACD,CAzCD;;AA2CA,IAAMgB,SAAS,GAAG,SAAZA,SAAY,CAACC,CAAD,EAAO;AAEvB,MAAMvD,KAAK,GAAGwC,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CzC,KAAxD,CAFuB,CAIvB;;AACA,MAAIO,MAAM,CAAC8B,MAAP,KAAkB,CAAtB,EAAyB;AACvB;AACA,QAAM7B,YAAY,GAAGF,IAAI,CAACG,MAAL,CAAY,UAAAC,CAAC;AAAA,aAAIA,CAAC,CAACW,EAAF,KAASd,MAAM,CAACc,EAApB;AAAA,KAAb,CAArB,CAFuB,CAGvB;;AACAb,IAAAA,YAAY,CAAC,CAAD,CAAZ,CAAgBG,OAAhB,GAA0B,KAA1B,CAJuB,CAMzB;AACC,GAPD,MAOO,IAAIJ,MAAM,CAAC8B,MAAP,KAAkB,CAAtB,EAAyB;AAC9B;AACA,QAAM7B,aAAY,GAAGF,IAAI,CAACG,MAAL,CAAY,UAAAC,CAAC;AAAA,aAAIA,CAAC,CAACW,EAAF,KAASd,MAAM,CAACc,EAApB;AAAA,KAAb,CAArB,CAF8B,CAG9B;;;AACAb,IAAAA,aAAY,CAAC,CAAD,CAAZ,CAAgBqB,IAAhB,GAAuB7B,KAAvB,CAJ8B,CAMhC;AACC,GAPM,MAOA;AAEL,QAAIwD,KAAK,GAAG,CAAZ;AAEAlD,IAAAA,IAAI,CAACW,GAAL,CAAS,YAAM;AAAEuC,MAAAA,KAAK,IAAI,CAAT;AAAa,KAA9B;AAEAlD,IAAAA,IAAI,CAACmD,IAAL,CAAU;AACRpC,MAAAA,EAAE,EAAEmC,KAAK,GAAG,CADJ;AAER3B,MAAAA,IAAI,EAAE7B,KAFE;AAGRwB,MAAAA,QAAQ,EAAE,KAHF;AAIRL,MAAAA,QAAQ,EAAE,KAJF;AAKRR,MAAAA,OAAO,EAAE;AALD,KAAV;AAOD;;AAEDJ,EAAAA,MAAM,CAACc,EAAP,GAAY,EAAZ;AACAd,EAAAA,MAAM,CAAC8B,MAAP,GAAgB,EAAhB;AAEAzB,EAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ;AAEAgC,EAAAA,UAAU;AAEVoB,EAAAA,OAAO;AACR,CA1CD;;AA4CA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAe;AAEnC,MAAI,mDAAJ,EAAgB,OAFmB,CAInC;AACA;;AAEApD,EAAAA,MAAM,CAACc,EAAP;AACAd,EAAAA,MAAM,CAAC8B,MAAP,oDARmC,CASnC;;AACA,MAAM7B,YAAY,GAAGF,IAAI,CAACG,MAAL,CAAY,UAAAC,CAAC;AAAA,WAAIA,CAAC,CAACW,EAAF,KAASd,MAAM,CAACc,EAApB;AAAA,GAAb,CAArB;;AAEA,MAAId,MAAM,CAAC8B,MAAP,KAAkB,CAAtB,EAAyB;AACvB7B,IAAAA,YAAY,CAAC,CAAD,CAAZ,CAAgBgB,QAAhB,GAA2B,CAAChB,YAAY,CAAC,CAAD,CAAZ,CAAgBgB,QAA5C;AACD,GAFD,MAEO;AACLhB,IAAAA,YAAY,CAAC,CAAD,CAAZ,CAAgBW,QAAhB,GAA2B,CAACX,YAAY,CAAC,CAAD,CAAZ,CAAgBW,QAA5C;AACD;;AAEDZ,EAAAA,MAAM,CAACc,EAAP,GAAY,EAAZ;AACAd,EAAAA,MAAM,CAAC8B,MAAP,GAAgB,EAAhB;AAEAzB,EAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ;AAEAoD,EAAAA,OAAO;AACR,CAxBD;;AA0BA,IAAME,WAAW,GAAG,SAAdA,WAAc,GAAe;AAEjC,MAAI,mDAAJ,EAAgB;AAEhBhD,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AAED,CAND;;AAQA,IAAM6C,OAAO,GAAG,SAAVA,OAAU,GAAM;AAEpB,MAAMG,SAAS,GAAGxD,WAAW,CAACC,IAAD,EAAOC,MAAP,CAA7B;AACA,MAAM0C,KAAK,GAAGT,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,CAAd;AAEAQ,EAAAA,KAAK,CAACC,SAAN,GAAkBW,SAAlB,CALoB,CAOpB;;AACArB,EAAAA,QAAQ,CAACC,cAAT,CAAwB,kBAAxB,EAA4CY,gBAA5C,CAA6D,OAA7D,EAAsEV,WAAtE;AAEAgB,EAAAA,aAAa;AAEbC,EAAAA,WAAW;AAEZ,CAdD;;AAgBApB,QAAQ,CAACa,gBAAT,CAA0B,kBAA1B,EAA8CK,OAA9C","file":"index.js","sourcesContent":["'use strict';\n\nlet modalComponent = {\n  title: 'Add New Todo',\n  value: '',\n  delete: false,\n  renderHTML() {\n\n    let form = '';\n    if (this.delete) {\n      form = `\n        <div class=\"input-container\">\n          <h2>Your are about to delete this item</h2>\n          <input type=\"text\" disabled id=\"input-add-todo\" class=\"form-control\" id=\"\" value=\"${this.value}\">\n          <button type=\"button\" id=\"btn-save-todo\" class=\"btn btn-red\">Confirm Delete</button>\n        </div>\n      `;\n    } else {\n      form = `\n        <div class=\"input-container\">\n          <input type=\"text\" placeholder=\"${this.title}\" id=\"input-add-todo\" class=\"form-control\" id=\"\" value=\"${this.value}\">\n          <button type=\"button\" id=\"btn-save-todo\" class=\"btn btn-green\">GO</button>\n        </div>\n      `;\n    }\n\n    const html = `\n      <div class=\"modal\" id=\"modal\">\n        <div class=\"modal-header\">\n          <h4 class=\"modal-title\"></h4>\n          <button type=\"button\" class=\"close btn btn-red\" id=\"btn-close-modal\">\n            <span aria-hidden=\"true\">X</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n           ${form}\n        </div>\n      </div>\n    `;\n\n    return html.trim();\n  }\n};\n\nfunction renderTable(data, active) {\n\n  // Remove unpublished/deleted items from the array\n  const dataIsolated = data.filter(p => p.publish);\n\n  console.log(dataIsolated);\n\n  let rows = [];\n  let countTotal = 0;\n  let countComplete = 0;\n  dataIsolated.map(items => {\n\n    countTotal += 1; // total no of rows\n    if (items.complete) countComplete += 1; // get total no of completed\n\n    const editParams = [items.id, 1]; // edit\n    const deleteParams = [items.id, 2]; // delete\n    \n    // edit and delete buttons\n    const btns = `\n      <button type=\"button\" data-type=\"edit\" onclick=\"renderModal(${editParams});\" class=\"btn btn-green btn-edit\">Edit</button>\n      <button type=\"button\" data-type=\"delete\" onclick=\"renderModal(${deleteParams});\" class=\"btn btn-red btn-delete\">Delete</button>\n    `;\n\n    // checkbox statuses and pararms for priority\n    const priority = (items.priority) ? ' checked' : '';\n    const priorityText = (items.priority) ? ' Yes' : ' No';\n    const priorityParams = [items.id, 1];\n    // checkbox statuses and pararms for complete\n    const complete = (items.complete) ? ' checked' : '';\n    const completeText = (items.complete) ? ' Yes' : ' No';\n    const completeParams = [items.id, 2];\n\n    // generate table rows\n    rows += `\n      <tr>\n        <td>${items.name}</td>\n        <td>\n          <label>\n            <input type=\"checkbox\"${priority} onchange=\"toggleHandler(${priorityParams});\" class=\"custom-control-input\">${priorityText}\n          </label>\n        </td>\n        <td>\n          <label>\n            <input type=\"checkbox\"${complete} onchange=\"toggleHandler(${completeParams});\" class=\"custom-control-input\">${completeText}\n          </label>\n        </td>\n        <td>${btns}</td>\n      </tr>\n    `;  \n  });\n\n  // create button\n  const addBtn = `\n      <button type=\"button\" id=\"btn-launch-modal\" class=\"btn btn-green\">Add New Todo</button>\n  `;\n\n  const sortPriorityParams = [1];\n  const sortNameParams = [2];\n\n  const sortPriority = (active.sortPriority) ? ' checked' : '';\n  const sortName = (active.sortName) ? ' checked' : '';\n \n  // sort UI\n  const sortUI = `\n    <label>\n      <input type=\"checkbox\"${sortName} onchange=\"sortHandler(${sortNameParams});\" class=\"custom-control-input\"> Sort by Name\n    </label>\n    <label>\n      <input type=\"checkbox\"${sortPriority} onchange=\"sortHandler(${sortPriorityParams});\" class=\"custom-control-input\"> Sort by Priority\n    </label>\n  `;\n\n  // assemble the table\n  const table = `\n   <div class=\"ui-container\">${sortUI} ${addBtn}</div>\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th>Name</th>\n          <th>Priority</th>\n          <th>Complete</th>\n          <th>Edit</th>\n        </tr>\n      </thead>\n      <tbody>\n        ${rows}\n      </tbody>\n    </table>\n    <div class=\"text-center\" style=\"margin-top: 1rem\">${countComplete} of ${countTotal} Todos Complete.</div>\n  `;\n\n  return table;\n}\n\nlet data = [\n  {\n    id: 1,\n    name: 'Take out the trash',\n    priority: false,\n    complete: false,\n    publish: true\n  }, {\n    id: 2,\n    name: 'Bring in the trash',\n    priority: false,\n    complete: false,\n    publish: true\n  },  {\n    id: 3,\n    name: 'Walk the dog',\n    priority: true,\n    complete: false,\n    publish: true\n  } \n];\n\nlet active = {\n  id: '',\n  action: '',\n  sortPriority: false,\n  sortName: false\n};\n\n/* ########################\n######### METHODS #########\n######################### */\n\nconst closeModal = () => {\n  // Remove modal from DOM\n  const modal = document.getElementById('modal');\n  modal.remove();\n\n  active.id = '';\n  active.action = '';\n};\n\nconst renderModal = (...params) => {\n\n  console.log(params[0], params[1]);\n\n  // params[1] === 1 Edit\n  // params[1] === 2 Delete\n \n  // Generate new modal object\n  const modal = Object.create(modalComponent);\n  modal.title = 'Add New Todo';\n\n  // check params for edit or delete\n  if (params[1]) {\n\n    active.id = params[0];\n    active.action = params[1];\n\n    const val = data.filter(p => p.id === params[0]);\n    modal.value = val[0].name;\n\n    // set to delete to true to switch modal UI\n    if (params[1] === 2) modal.delete = true;\n  }\n\n  const newModal = modal.renderHTML();\n  const mount = document.getElementById('modal-mount-point');\n  // Add modal to the DOM\n  mount.innerHTML = newModal;\n\n  if ((!params[1]) || (params[1] === 1)) {\n    // Automatically add focus to the input in the modal\n    const input = document.getElementById('input-add-todo');\n    input.focus();\n\n  }\n  \n  // add lister to save btn\n  document.getElementById(\"btn-save-todo\").addEventListener(\"click\", saveValue);\n\n  // Add listener to close modal button\n  document.getElementById(\"btn-close-modal\").addEventListener(\"click\", closeModal);\n};\n\nconst saveValue = (e) => {\n\n  const value = document.getElementById(\"input-add-todo\").value;\n\n  // Delete function\n  if (active.action === 2) {\n    // isolate item to delete\n    const dataIsolated = data.filter(p => p.id === active.id);\n    // set item to unpublish (soft delete)\n    dataIsolated[0].publish = false;\n\n  // Edit function\n  } else if (active.action === 1) {\n    // Isolate item to edit\n    const dataIsolated = data.filter(p => p.id === active.id);\n    // Set new value\n    dataIsolated[0].name = value;\n  \n  // Create new item function\n  } else {\n    \n    let count = 0;\n\n    data.map(() => { count += 1; });\n\n    data.push({\n      id: count + 1,\n      name: value,\n      priority: false,\n      complete: false,\n      publish: true\n    });\n  }\n\n  active.id = '';\n  active.action = '';\n\n  console.log(data);\n\n  closeModal();\n\n  loadApp();\n};\n\nconst toggleHandler = (...params) => {\n\n  if (!params[1]) return;\n\n  // params[1] === 1 Priority\n  // params[1] === 2 Complete\n\n  active.id = params[0];\n  active.action = params[1];\n  // Isolate item to edit\n  const dataIsolated = data.filter(p => p.id === active.id);\n\n  if (active.action === 1) {\n    dataIsolated[0].priority = !dataIsolated[0].priority;\n  } else {\n    dataIsolated[0].complete = !dataIsolated[0].complete;\n  }\n\n  active.id = '';\n  active.action = '';\n\n  console.log(data);\n  \n  loadApp();\n};\n\nconst sortHandler = (...params) => {\n\n  if (!params[1]) return;\n\n  console.log('hello');\n\n};\n\nconst loadApp = () => {\n  \n  const tableHTML = renderTable(data, active);\n  const mount = document.getElementById('app-mount-point');\n\n  mount.innerHTML = tableHTML;\n\n  // Listen for add todo click\n  document.getElementById(\"btn-launch-modal\").addEventListener(\"click\", renderModal);\n      \n  toggleHandler();\n\n  sortHandler();\n\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", loadApp);\n"]}